<!DOCTYPE html>
<html lang="fi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Niko Aaltonen — Portfolio</title>
<style>
:root{ --ink:#e9ebef; --muted:#a9adb6; --stroke:rgba(255,255,255,.08); --panel:rgba(20,20,24,.5); }

/* Background gradients */
.bg-bio  { background: radial-gradient(1200px 600px at 10% 10%,  #0f172a 0%, #0b1220 55%, #070b12 100%); }
.bg-soolo{ background: radial-gradient(1200px 600px at 90% 10%,  #1f1d55 0%, #2f2aa6 45%, #1b1761 100%); }
.bg-teat { background: radial-gradient(1200px 600px at 10% 90%,  #5b0d0d 0%, #8b1e1e 40%, #2a0b0b 100%); }
.bg-elek { background: radial-gradient(1200px 600px at 90% 90%,  #0a3b37 0%, #128277 40%, #072b29 100%); }
/* inviting contact — warm, distinct from Bio */
.bg-ytx  { background: radial-gradient(1200px 600px at 50% 50%,  #2a1b1b 0%, #3f2716 45%, #1b100a 100%); }

/* Themed text/accents (no plain white) */
.theme-bio  { --ink:#E7EEF9; --accent:#9BC2FF; }
.theme-soolo{ --ink:#EEE9FF; --accent:#B7A6FF; }
.theme-teat { --ink:#D7FFF4; --accent:#7FFFE1; }
.theme-elek { --ink:#FFE5E5; --accent:#FF9F9F; }
.theme-ytx  { --ink:#FFEBDD; --accent:#FFB86B; }

*{box-sizing:border-box}
html,body{ margin:0; height:100%; font-family:Inter,system-ui,sans-serif; color:var(--ink); transition:background .7s ease,color .3s ease; }
.wrap{ display:grid; grid-template-columns:260px 1fr; max-width:1400px; margin:0 auto; gap:20px; padding:20px; }
@media (max-width:900px){ .wrap{ grid-template-columns:1fr; } }

.sidebar{ position:sticky; top:16px; }
.side-grid{ display:grid; gap:10px; }
.cat{
  display:block; padding:12px; border:1px solid var(--stroke); border-radius:8px;
  color:var(--ink); text-decoration:none; font-weight:700; letter-spacing:.2px;
  background:rgba(255,255,255,.05); transition:.2s;
}
.cat:hover{ background:rgba(255,255,255,.1); border-color:var(--accent); }
.cat.active{ outline:2px solid color-mix(in oklab, var(--accent) 60%, transparent); background:rgba(255,255,255,.16); color:var(--accent); }

.panel{ background:var(--panel); border:1px solid var(--stroke); border-radius:12px; padding:18px; backdrop-filter:blur(8px); margin-bottom:20px; }

/* Hero — side-by-side collages + gentle corner fade */
.hero{
  --ar: 16/9; aspect-ratio: var(--ar);
  max-height: 60vh; min-height: 280px;
  border-radius:12px; overflow:hidden; position:relative; width:100%;
  -webkit-mask-image: radial-gradient(135% 135% at 50% 50%, #000 78%, rgba(0,0,0,0) 100%);
          mask-image: radial-gradient(135% 135% at 50% 50%, #000 78%, rgba(0,0,0,0) 100%);
}
.slide{ position:absolute; inset:0; opacity:0; transition:opacity 1s ease-in-out; display:flex; }
.slide.active{ opacity:1; }
.slide img{ width:100%; height:100%; object-fit:contain; object-position:center; }
.slide.duo{ display:grid; grid-template-columns:1fr 1fr; gap:10px; align-items:center; }
.slide.duo img{ width:100%; height:100%; object-fit:cover; border-radius:8px; }
.slide img.cover-lean{ object-fit:cover; }

/* Players */
.ws-card{ display:grid; gap:10px; padding:14px; border-radius:12px; border:1px solid var(--stroke); background:rgba(255,255,255,.04); margin-bottom:10px; }
.ws-row{ display:grid; grid-template-columns:auto 1fr auto; gap:12px; align-items:center; }
.ws-play{ width:44px; height:44px; border-radius:10px; border:1px solid var(--stroke); background:rgba(255,255,255,.06); color:var(--ink); font-size:18px; cursor:pointer; }
.ws-wave{ height:64px; }
.ws-time{ font-variant-numeric:tabular-nums; opacity:.9; }
.ws-error{ font-size:.9rem; opacity:.9; color:#ffd1d1; display:none; }

/* Embeds */
.soolo-grid{ display:grid; gap:16px; }
.soolo-card .soolo-embeds{ display:grid; gap:12px; }
@media (min-width:740px){ .soolo-card .soolo-embeds{ grid-template-columns:1fr 1fr; } }
.embed{ width:100%; border-radius:12px; overflow:hidden; border:1px solid var(--stroke); background:rgba(255,255,255,.04); }
.embed-16x9{ position:relative; padding-top:56.25%; }
.embed-16x9 iframe{ position:absolute; inset:0; width:100%; height:100%; }

/* Make Spotify fill 16:9 equally (scaled to cover) */
.embed-16x9.spot-zoom{ overflow:hidden; }
.embed-16x9.spot-zoom iframe{
  position:absolute; top:50%; left:50%;
  width:640px; height:152px; /* native Spotify size */
  transform-origin:center; transform:translate(-50%,-50%) scale(var(--spot-scale,1));
}
</style>
</head>
<body class="bg-bio theme-bio">

<div class="wrap">
  <aside class="sidebar">
    <div class="side-grid">
      <a class="cat active" href="#bio"           data-cat="bio">Bio</a>
      <a class="cat"        href="#soolotuotanto" data-cat="soolotuotanto">Soolotuotanto</a>
      <a class="cat"        href="#teatteri"      data-cat="teatteri">Teatteri / Äänisuunnittelu</a>
      <a class="cat"        href="#elektroninen"  data-cat="elektroninen">Elektroninen / Kokeellinen</a>
      <a class="cat"        href="#yhteys"        data-cat="yhteys">Palvelut / Yhteystiedot</a>
    </div>
  </aside>

  <main id="main-content">
    <!-- Hero -->
    <section class="hero" id="hero">
      <div class="slide duo active">
        <img src="images/Kuva 1.jpeg" alt="">
        <img src="images/Kuva 3.jpeg" alt="">
      </div>
      <div class="slide">
        <img class="cover-lean" src="images/Kuva 2.jpeg" alt="">
      </div>
      <div class="slide duo">
        <img src="images/Kuva 4.jpeg" alt="">
        <img src="images/Kuva 7.jpeg" alt="">
      </div>
      <div class="slide"><img src="images/Kuva 5.jpeg" alt=""></div>
      <div class="slide"><img src="images/Kuva 6.jpeg" alt=""></div>
      <div class="slide"><img src="images/Kuva 8.jpeg" alt=""></div>
    </section>

    <div id="content-area"></div>
  </main>
</div>

<script src="https://unpkg.com/wavesurfer.js@7"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
  /* ===== Slideshow ===== */
  const slides = document.querySelectorAll('.slide');
  let idx = 0;
  if (slides.length) {
    setInterval(() => {
      slides[idx].classList.remove('active');
      idx = (idx + 1) % slides.length;
      slides[idx].classList.add('active');
    }, 7000);
  }

  /* ===== Helpers ===== */
  function audioCard(file, title, folder) {
    const url = 'audio/' + encodeURIComponent(folder) + '/' + encodeURIComponent(file);
    return (
`<div class="ws-card" data-file="${url}">
  <div><strong>${title}</strong></div>
  <div class="ws-row">
    <button class="ws-play">▶</button>
    <div class="ws-wave"></div>
    <div class="ws-time">0:00 / 0:00</div>
  </div>
  <div class="ws-error"></div>
</div>`
    );
  }
  const fmtTime = s => {
    if (!isFinite(s)) return "0:00";
    const m = Math.floor(s/60);
    const sec = Math.floor(s%60).toString().padStart(2,'0');
    return `${m}:${sec}`;
  };
  function showErr(card, msg, url){
    const el = card.querySelector('.ws-error');
    el.style.display = '';
    el.textContent = '⚠️ ' + msg + (url ? ' ('+url+')' : '');
  }
  function clearErr(card){ const el = card.querySelector('.ws-error'); el.style.display='none'; el.textContent=''; }

  let wsInstances = [];
  function pauseOthers(except){ wsInstances.forEach(w => { if (w !== except && w.isPlaying()) w.pause(); }); }
  function destroyPlayers(){ wsInstances.forEach(w=>{ try{w.destroy()}catch(e){} }); wsInstances=[]; }

  /* Build players immediately: waveform visible; single-click play; pause others */
  function wirePlayers(scope=document){
    scope.querySelectorAll('.ws-card').forEach(card=>{
      const wave=card.querySelector('.ws-wave');
      const btn=card.querySelector('.ws-play');
      const time=card.querySelector('.ws-time');
      const url=card.dataset.file;

      const ws = WaveSurfer.create({
        container: wave,
        waveColor:'rgba(255,255,255,0.4)',
        progressColor:'rgba(255,255,255,0.85)',
        height:64, barWidth:2, barRadius:2, responsive:true,
        url
      });
      wsInstances.push(ws);

      ws.on('ready', ()=>{ clearErr(card); time.textContent = `0:00 / ${fmtTime(ws.getDuration())}`; });
      const onTick = (t)=>{ time.textContent = `${fmtTime(t)} / ${fmtTime(ws.getDuration())}`; };
      ws.on('timeupdate', onTick);
      ws.on('audioprocess', onTick);
      ws.on('pause', ()=>{ btn.textContent='▶'; });
      ws.on('play',  ()=>{ btn.textContent='⏸'; pauseOthers(ws); });
      ws.on('error', ()=>{ showErr(card, 'Soitin ei voinut avata tiedostoa.', url); });

      btn.addEventListener('click', ()=>{ ws.playPause(); });
    });
  }

  /* ===== Spotify scale to fill 16:9 ===== */
  function scaleSpotify(){
    document.querySelectorAll('.spot-zoom').forEach(box=>{
      const r = box.getBoundingClientRect();
      const scale = Math.max(r.width/640, r.height/152); // cover
      box.style.setProperty('--spot-scale', scale);
    });
  }
  window.addEventListener('resize', scaleSpotify);

  /* ===== Content (with swaps + filenames) ===== */
  const content = {
    bio: `
      <section class="panel">
        <h1>Niko Aaltonen</h1>
        <p>Muusikko • Säveltäjä • Pedagogi</p>
        <p>Niko Aaltonen on säveltäjä, äänisuunnittelija ja monialainen taiteilija Turusta. Hänen taustansa musiikkituotannon ja teatterin parissa näkyy työssä, jossa yhdistyvät tunnelmalliset äänimaisemat ja vahva emotionaalinen syvyys. Niko luo musiikkia ja äänisuunnittelua, jotka kertovat tarinoita, herättävät muistoja ja tukevat esitysten visuaalista ja dramaturgista kokonaisuutta. Hänen äänimaailmansa liikkuvat klassisen musiikin, pop/rockin ja elektronisen kokeellisuuden välillä – rajoja pelottomasti rikkoen.</p>
        <p>Nikon musiikillinen polku alkoi jo nuorena, kun hän osti ensimmäisen kitaransa. Vuosien varrella hän on syventynyt intohimoisesti musiikin eri osa-alueisiin ja opiskellut laajasti useita genrejä ja soittimia, kuten bassoa, rumpuja ja laulua. Hän valmistui muusikoksi Turun konservatoriosta ja palveli tämän jälkeen Puolustusvoimien varusmiessoittokunnassa, josta hän valmistui aliupseerina. Tällä hetkellä Niko opiskelee huilunsoittoa Turun ammattikorkeakoulussa ja jatkaa musiikin tekemistä monipuolisesti eri muodoissa.</p>
      </section>
    `,
    soolotuotanto: `
      <section class="panel">
        <h2>Soolotuotanto</h2>
        <p>Valikoituja julkaisuja ja äänitteitä.</p>
      </section>

      <section class="soolo-grid">
        <div class="soolo-card panel">
          <h3>Julkaisu</h3>
          <div class="soolo-embeds">
            <!-- Spotify 16:9, scaled to cover -->
            <div class="embed embed-16x9 spot-zoom">
              <iframe loading="lazy" src="https://open.spotify.com/embed/track/4xiEQA4enJbKFnzzgcbjqj" frameborder="0" allow="autoplay; clipboard-write; encrypted-media; picture-in-picture"></iframe>
            </div>
            <div class="embed embed-16x9">
              <iframe loading="lazy" src="https://www.youtube.com/embed/Juo7VjB8-1w?rel=0&modestbranding=1" title="YouTube video" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
          </div>
        </div>
      </section>

      <section class="panel">
        <h3>Äänitteet</h3>
        ${audioCard("Halusin Kertoo.mp3", "Halusin Kertoo", "soolotuotanto")}
        ${audioCard("Taiteilija.mp3", "Taiteilija", "soolotuotanto")}
      </section>
    `,
    teatteri: `
      <section class="panel"><h2>Näytteitä teatterimusiikista</h2></section>

      <section class="panel"><h3>Musiikkia näytelmästä Selli</h3><p class="sub" style="margin:-6px 0 12px;color:var(--muted);font-style:italic">Traumaa ja sekavia tunteita</p>
        ${audioCard("selli_2naytos6kohtaus.mp3", "Teeman huipennus", "teatteri_aanisuunnittelu")}
        ${audioCard("selli_4naytos1kohtaus.mp3", "Järkensä menettänyt", "teatteri_aanisuunnittelu")}
      </section>

      <section class="panel"><h3>Musiikkia näytelmästä Mimmilehmän ja Variksen kesäpäivä laitumella</h3><p class="sub" style="margin:-6px 0 12px;color:var(--muted);font-style:italic">Hullunkurista hauskaa</p>
        ${audioCard("Intromusa.mp3", "Intromusa", "teatteri_aanisuunnittelu")}
        ${audioCard("Jännitys ja Skrätsi.mp3", "Jännitys ja Skrätsi", "teatteri_aanisuunnittelu")}
        ${audioCard("Varis odottaa.mp3", "Varis odottaa", "teatteri_aanisuunnittelu")}
        ${audioCard("39. Toka tanssi.mp3", "Toka tanssi", "teatteri_aanisuunnittelu")}
        ${audioCard("Viimeinen tanssi.mp3", "Viimeinen tanssi", "teatteri_aanisuunnittelu")}
      </section>

      <section class="panel"><h3>Toivonsa kätkenyt — Rohkea ja tulinen</h3>
        ${audioCard("Merituulet.mp3", "Merituulet", "teatteri_aanisuunnittelu")}
      </section>
    `,
    elektroninen: `
      <section class="panel"><h2>Elektroninen / Kokeellinen</h2>
        ${audioCard("1. Elämä on työ.mp3", "Elämä on työ", "elektroninen")}
        ${audioCard("2. Isompi ku beatles.mp3", "Isompi ku beatles", "elektroninen")}
        ${audioCard("3. Laskut.mp3", "Laskut", "elektroninen")}
        ${audioCard("4. Oot Ruma.mp3", "Oot Ruma", "elektroninen")}
        ${audioCard("5. Salaisestiseksikäs_instr.mp3", "Salaisestiseksikäs (instr.)", "elektroninen")}
        ${audioCard("6. Dundun.mp3", "Dundun", "elektroninen")}
      </section>
    `,
    yhteys: `
      <section class="panel">
        <h2>Palvelut / Yhteystiedot</h2>
        <h3>Sävellys</h3>
        <p>Teen sävellyksiä klassisesta musiikista teatteri- ja elokuvamusiikkiin sekä kokonaisiin ääniraitoihin — mihin tahansa projektiin, jonka haluat herättää eloon.</p>
        <h3>Laulunkirjoitus</h3>
        <p>Kirjoitan kappaleita popista, rockista ja metallista aina sooloartistien biitteihin asti. Älä epäröi pyytää myös muiden tyylilajien teoksia.</p>
        <h3>Miksaus</h3>
        <p>Miksaan kappaleesi tuoden siihen selkeyttä, syvyyttä ja viimeistellyn soinnin.</p>
        <h3>Kitara-, basso- ja huilutunnit</h3>
        <p>35€/h. Voimme luoda pitkäaikaisemman suunnitelman taitojesi kehittämiseksi tai keskittyä yksittäisiin ongelmiin, joissa koet olevasi jumissa.</p>
        <h3>Sävellys- ja laulunkirjoitusopetus</h3>
        <p>Mahdollista pyynnöstä!</p>
        <h3>Yhteystiedot</h3>
        <p>Puhelin: 045 110 7090 <em>(soitto, tekstiviesti, WhatsApp)</em><br>
           Sähköposti: aaltonenniko989@gmail.com</p>
      </section>
    `
  };

  /* ===== Color SWAPS requested =====
     - Bio ↔︎ Soolotuotanto
     - Teatteri ↔︎ Elektroninen
     - Yhteys = its own warm palette
  */
  const bgClass = {
    bio:'bg-soolo',            // swapped
    soolotuotanto:'bg-bio',   // swapped
    teatteri:'bg-elek',       // swapped
    elektroninen:'bg-teat',   // swapped
    yhteys:'bg-ytx'
  };
  const themeClass = {
    bio:'theme-soolo',
    soolotuotanto:'theme-bio',
    teatteri:'theme-elek',
    elektroninen:'theme-teat',
    yhteys:'theme-ytx'
  };

  function applyTheme(cat){
    document.body.className = (bgClass[cat]||'bg-bio') + ' ' + (themeClass[cat]||'theme-bio');
    document.querySelectorAll('.cat').forEach(a => a.classList.toggle('active', a.dataset.cat===cat));
  }

  function renderFromHash() {
    const cat = (location.hash.replace('#','') || 'bio');
    if (!content[cat]) return;
    applyTheme(cat);
    const area = document.getElementById('content-area');
    area.innerHTML = content[cat];
    destroyPlayers();
    wirePlayers(area);
    scaleSpotify(); // keep embeds visually equal
  }
  window.addEventListener('hashchange', renderFromHash);
  renderFromHash();
});
</script>
</body>
</html>
