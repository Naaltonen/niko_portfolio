<!DOCTYPE html>
<html lang="fi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Niko Aaltonen — Portfolio</title>
<style>
:root{
  --ink:#e9ebef; --muted:#a9adb6; --stroke:rgba(255,255,255,.08);
  --panel:rgba(20,20,24,.5);
  /* subtle deep tones per section */
  --c-bio:#0f1115; --c-soolo:#151722; --c-teat:#1b1a1d;
  --c-elek:#131a1a; --c-ytx:#101318;
}
*{box-sizing:border-box}
html,body{
  margin:0;height:100%;
  font-family:Inter,system-ui,sans-serif;
  color:var(--ink);
  background:var(--c-bio);
  transition:background-color .7s ease;
}
.wrap{display:grid;grid-template-columns:260px 1fr;max-width:1400px;margin:0 auto;gap:20px;padding:20px}
@media (max-width:900px){.wrap{grid-template-columns:1fr}}

.sidebar{position:sticky;top:16px}
.side-grid{display:grid;gap:10px}
.cat{
  display:block;padding:12px;border:1px solid var(--stroke);border-radius:8px;
  color:var(--ink);text-decoration:none;font-weight:600;background:rgba(255,255,255,.05);transition:.2s
}
.cat:hover{background:rgba(255,255,255,.1)}
.cat.active{outline:2px solid rgba(255,255,255,.25);background:rgba(255,255,255,.12)}

.panel{
  background:var(--panel);border:1px solid var(--stroke);
  border-radius:12px;padding:18px;backdrop-filter:blur(8px);margin-bottom:20px
}

/* Hero: no dark corners */
.hero{border-radius:12px;overflow:hidden;position:relative;height:min(48vh,520px)}
.slide{position:absolute;inset:0;opacity:0;transition:opacity 1.2s ease-in-out}
.slide.active{opacity:1}
.slide img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover}

/* Wavesurfer players */
.ws-card{display:grid;gap:10px;padding:14px;border-radius:12px;border:1px solid var(--stroke);background:rgba(255,255,255,.04);margin-bottom:10px}
.ws-row{display:grid;grid-template-columns:auto 1fr auto;gap:12px;align-items:center}
.ws-play{width:44px;height:44px;border-radius:10px;border:1px solid var(--stroke);background:rgba(255,255,255,.06);color:var(--ink);font-size:18px;cursor:pointer}
.ws-wave{height:64px}
.ws-time{font-variant-numeric:tabular-nums;opacity:.9}

/* Embeds */
.soolo-grid{display:grid;gap:16px}
.soolo-card .soolo-embeds{display:grid;gap:12px}
@media (min-width:740px){ .soolo-card .soolo-embeds{grid-template-columns:1fr 1fr} }
.embed{width:100%;border-radius:12px;overflow:hidden;border:1px solid var(--stroke);background:rgba(255,255,255,.04)}
.embed-16x9{position:relative;padding-top:56.25%}
.embed-16x9 iframe{position:absolute;inset:0;width:100%;height:100%}
.embed-spotify iframe{width:100%;height:152px}
</style>
</head>
<body>

<div class="wrap">
  <aside class="sidebar">
    <div class="side-grid">
      <a class="cat active" data-cat="bio" href="#">Bio</a>
      <a class="cat" data-cat="soolotuotanto" href="#">Soolotuotanto</a>
      <a class="cat" data-cat="teatteri" href="#">Teatteri / Äänisuunnittelu</a>
      <a class="cat" data-cat="elektroninen" href="#">Elektroninen / Kokeellinen</a>
      <a class="cat" data-cat="yhteys" href="#">Palvelut / Yhteystiedot</a>
    </div>
  </aside>

  <main id="main-content">
    <!-- Slideshow -->
    <section class="hero" id="hero">
      <div class="slide active"><img src="images/Kuva 1.jpeg" alt=""></div>
      <div class="slide"><img src="images/Kuva 2.jpeg" alt=""></div>
      <div class="slide"><img src="images/Kuva 3.jpeg" alt=""></div>
      <div class="slide"><img src="images/Kuva 4.jpeg" alt=""></div>
      <div class="slide"><img src="images/Kuva 5.jpeg" alt=""></div>
      <div class="slide"><img src="images/Kuva 6.jpeg" alt=""></div>
      <div class="slide"><img src="images/Kuva 7.jpeg" alt=""></div>
      <div class="slide"><img src="images/Kuva 8.jpeg" alt=""></div>
    </section>

    <div id="content-area"></div>
  </main>
</div>

<script src="https://unpkg.com/wavesurfer.js@7"></script>
<script>
// ===== Slideshow =====
const slides = document.querySelectorAll('.slide');
let idx = 0;
setInterval(() => {
  slides[idx].classList.remove('active');
  idx = (idx + 1) % slides.length;
  slides[idx].classList.add('active');
}, 7000);

// ===== Helpers =====
function audioCard(file, title, folder) {
  const url = encodeURI('audio/' + folder + '/' + file);
  return `
    <div class="ws-card" data-file="${url}">
      <div><strong>${title}</strong></div>
      <div class="ws-row">
        <button class="ws-play" data-state="idle">▶</button>
        <div class="ws-wave"></div>
        <div class="ws-time">0:00 / 0:00</div>
      </div>
    </div>`;
}
const fmtTime = s => {
  if (!isFinite(s)) return "0:00";
  const m = Math.floor(s/60);
  const sec = Math.floor(s%60).toString().padStart(2,'0');
  return `${m}:${sec}`;
};

// Track/destroy players on tab change
let wsInstances = [];
function destroyPlayers(){ wsInstances.forEach(ws=>{ try{ws.destroy()}catch(e){} }); wsInstances=[]; }

// Lazy-init players on first click
function wirePlayers(scope=document){
  scope.querySelectorAll('.ws-card').forEach(card=>{
    let ws=null;
    const btn=card.querySelector('.ws-play');
    const wave=card.querySelector('.ws-wave');
    const time=card.querySelector('.ws-time');
    const url=card.dataset.file;

    const ensureWS=()=>{
      if (ws) return ws;
      ws = WaveSurfer.create({
        container: wave,
        waveColor:'rgba(255,255,255,0.4)',
        progressColor:'rgba(255,255,255,0.8)',
        height:64, barWidth:2, barRadius:2, responsive:true,
        url
      });
      wsInstances.push(ws);
      ws.on('ready', ()=>{ time.textContent = `0:00 / ${fmtTime(ws.getDuration())}`; });
      const onTick = (t)=>{ time.textContent = `${fmtTime(t)} / ${fmtTime(ws.getDuration())}`; };
      ws.on('timeupdate', onTick);
      ws.on('audioprocess', onTick);
      ws.on('pause', ()=>{ btn.textContent='▶'; });
      ws.on('play',  ()=>{ btn.textContent='⏸'; });
      return ws;
    };

    btn.addEventListener('click', ()=>{ ensureWS().playPause(); });
  });
}

// ====
